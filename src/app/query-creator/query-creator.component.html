<div class="border-bottom rounded-bottom p-2 shadow">
    <h6>Fields</h6>

    <div class="container" *ngIf="dataset && dataset.fields">
        <div class="row no-gutters">
            <div *ngFor="let field of candidateFields" class="col-6 mt-1">
                <button (click)="fieldSelected(field)" class="btn btn-sm" [class.btn-primary]="selectedFields.includes(field)"
                    [class.btn-light]="!selectedFields.includes(field)" [attr.title]="field.name" [disabled]="!selectableFields.includes(field) && !selectedFields.includes(field)">
                    <field-badge [field]="field"></field-badge>
                    {{ field.name }}
                </button>
            </div>
        </div>
    </div>

    <h6 class="mt-3">Query Preview</h6>
    <div class="shadow-none bg-light rounded p-2">
        <query-title [query]="newQuery" [editable]="true"></query-title>
        <span [hidden]="newQuery">Choose fields that should be included in the visualization.</span>
    </div>

    <div class="mt-2 text-right">
        <button class="btn btn-success mr-1" (click)="create()"
            [disabled]="selectedFields.length === 0">
            Create a Visualization
        </button>
        <button class="btn btn-danger" (click)="cancelCreation()">
            Cancel
        </button>
    </div>
</div>
